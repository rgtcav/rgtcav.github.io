<!DOCTYPE html>

<head>
    <title>Конспект лекции 13. IP протокол.</title>
    <link rel="stylesheet" href="../Conspect_style.css" type="text/css"/>
    <meta name="viewport" content="width=device-width">
</head>

<body>
    <div class="header-div">
            <a class="icon sub" href="../../index.html">К предмету</a>
            <a class="icon home" href="../../index.html">На главную</a>
    </div>
    <main>
        <div class="conspect_area">
        <H1>Конспект лекции 13. IP протокол.</H1>
        <h2>Общее</h2>
        <p><b><span>IP (internet protocol)</span></b> - это протокол сетевого уровня, который описывает правила адресации и межсетевое взаимодействие устройств.</p>
        <p>Ключевой особенностью протокола является адресация.</p>
        <p><b><i>IP адрес</i></b> - это уникальный составной числовой идентификатор.</p>
        <p>Он состоит из <b><i>адреса сети</i></b> и <b><i>адреса узла</i></b> этой сети.</p>
        <p>Существует две версии IP - IPv4 и IPv6. Четвёртая версия появилась ранее и выделяет под адрес 4 байта(32 бита), что в итоге позволяет работать в сети четырём миллиардам устройств. Однако данная цифра по меркам современных сетей очень мала. Была придумана новая версия протокола - IPv6.</p>
        <p>В 4-й версии IP-адрес представляет собой 32-битное число. Как правило, адрес записывается в виде четырёх десятичных чисел значением от 0 до 255 (эквиваленты четырём восьмибитным числам), разделённых точками, например, 192.168.0.3.</p>
        <p>В 6-й версии IP-адрес является 128-битным. Как правило, адрес записывается в виде восьми четырёхзначных шестнадцатеричных чисел (эквивалентны восьми 16-битным числам), разделённых двоеточиями, например, 2001:0db8:85a3:0000:0000:8a2e:0370:7334. Ведущие нули допускается в записи опускать. Нулевые группы, идущие подряд, могут быть опущены, вместо них ставится двойное двоеточие (fe80:0:0:0:0:0:0:1 можно записать как fe80::1). Более одного такого пропуска в адресе не допускается.</p>
        <p>Не смотря на нехватку адресов, были придуманы специальные технологии подмена и аренды сетевых адресов, а так же выделили частные диапазоны. Поэтому, лидирующую позицию занимает использование протокола IPv4, однако иногда можно найти примеры устройств с 6-ти байтным размером.</p>
        <p class="question info">IP протокол - это основной протокол для сети Интернет.</p>
        <h2>IPv4</h2>
        <p class="question warning">Всё, что обрабатывает компьютер, представлено в двоичном формате. Десятичная запись необходима лишь для удобного восприятия адреса человеком.</p>
        <p>IPv4 для идентификации использует <b><i>32-х битный</i></b> адрес, представленный в виде десятичного числа, каждые три разряда которого разделяются точкой. Каждый такой разряд называют октетом. Максимальным возможным числом в любом октете будет 255 (так как в двоичной системе это 8 единиц), а минимальным – 0.</p>
        <p>У всех IP адресов есть две части: сеть и узел.</p>
        <ul>
            <li><b><i>Сеть</i></b> – это та часть IP, которая не меняется во всей сети и все адреса устройств начинаются именно с номера сети.</li>
            <li><b><i>Узел</i></b> – это изменяющаяся часть IP. Каждое устройство имеет свой уникальный адрес в сети, он называется узлом.</li>
        </ul>
        <figure><img src="ShemaIP2-001.png"/><figcaption>схема идентификации.</figcaption></figure>
        
        <p>Структура IP-адреса представлена на рисунке далее.</p>
        <figure><img src="ShemaIP1-001.png"/><figcaption>структура ip-адреса.</figcaption></figure>
        <p>IP адрес не может существовать без маски подсети. Маска как бы "скрывает" адрес компьютера.</p>
        <p><b><i>Маска подсети</i></b> - это двоичное число, при поразрядном выполнении логической операции "и" отображает адрес сети.</p>
        <p>Все единицы в маске могут идти только последовательно. Иначе в ней не было бы смысла.
            Поэтому, маску могут указывать через слеш в виде количества единиц, которые записываются слева-направо, например 192.168.0.1/16. Такая запись называется <b><span>префиксной</span></b>.</p>
        <p>По количеству нулей в маске можно понять, сколько устройств может работать в сети. Для этого нужно возвести двойку в степень равную количеству нулей.</p>
        <p>Нужно учитывать, что у каждой сети есть два зарезервированных адреса - broadcast (самый последний адрес) и, собственно, сам адрес сети. Их нужно исключать из найденного ранее числа.</p>
        <figure><img src="mask_ip.png"/><figcaption>схема масок подсетей.</figcaption></figure>

        <h2>Частные IP-диапазоны.</h2>
        <p>Все IP-адреса протокола IPv4 делятся на публичные/глобальные/внешние (их называют "белые") — они используются в сети Интернет, и частные/локальные/внутренние (их называют "серые") — используются в локальной сети.</p>
        <p>Интернет - это сеть. И устройства, которые подключены к вашему роутеру - это тоже сеть. Как же тогда решают задачу нехватки адресов в глобальной сети? Ведь на одного человека приходится примерно 5-10 устройств минимум.</p>
        <p>Для того, чтобы вы могли построить свою локальную сеть с доступом в интернет, были выделены частные диапазоны адресов. Эти диапазоны не индексируются в Интернет (сайтов, которые бы находились в этих диапазонах просто не существует).</p>
        <p>Адреса из частных диапазонов называют "<b><span>серыми</span></b>.Это зарезервированные IP-адреса. Такие адреса предназначены для применения в закрытых локальных сетях, распределение таких адресов никем не контролируется.</p>
        <p>Напрямую доступ к сети Интернет, используя частный IP-адрес, невозможен. В этом случае связь с Интернетом осуществляется через NAT (трансляция сетевых адресов заменяет частный IP-адрес на публичный). Частные IP-адреса в пределах одной локальной сети должны быть уникальны и не могут повторяться.</p>
        <ul>
            <li>От 10.0.0.0 до 10.255.255.255 с маской 255.0.0.0 или /8</li>
            <li>От 172.16.0.0 до 172.31.255.255 с маской 255.240.0.0 или /12</li>
            <li>От 192.168.0.0 до 192.168.255.255 с маской 255.255.0.0 или /16</li>
            <li>От 100.64.0.0 до 100.127.255.255 с маской подсети 255.192.0.0 или /10; данная подсеть рекомендована согласно rfc6598 для использования в качестве адресов для CGN (Carrier-Grade NAT).</li>
        </ul>
        <p class="question">?Подсчитайте количество устройств в частных диапазонах</p>

        <h2>Глобальные IP-адреса</h2>
        <p>Глобальные IP-адреса называют "<b><span>белыми</span></b>". Такие адреса выдают в аренду. Их можно взять на время у провайдера за определённую плату в месяц. В этом случае, кроме вас такой IP-адрес не принадлежит, и он доступен всем в сети Интернет.</p>
        <p>Как же тогда происходит подключение к интернету обычного пользователя, который платит за доступ в интернет? И почему к нему нельзя подключиться из сети Интернет?</p>
        <p>Провайдер выдаёт на время (при каждом подключении к сети) временный IP-адрес. Если вы захотите развернуть на своём компьютере сайт, то для глобального доступа необходим "белый" адрес.</p>
        <p>Чтобы его получить необходимо обратиться к своему интернет-провайдеру, и он выдаст Вам публичный IP адрес, но он просто так его взять не может, поэтому провайдер обращается к локальному Интернет регистратору (LIR – Local Internet Registry), который выдаёт набор IP адресов Вашему провайдеру, а провайдер из него выделяет один адрес. Локальный Интернет регистратор не может выдать адреса из неоткуда, поэтому он обращается к региональному Интернет регистратору (RIR – Regional Internet Registry). В свою очередь региональный Интернет регистратор обращается к международной некоммерческой организации IANA (Internet Assigned Numbers Authority). Контролирует действие организации IANA компания ICANN (Internet Corporation for Assigned Names and Numbers). Такой сложный процесс необходим для того, чтобы не было путаницы в публичных IP адресах.</p>

        <h2>Технология NAT - подмена адресов</h2>
        <p>Для подмены "серого" адреса в "белый" используется технология <b><i>NAT</i></b>.</p>
        <p><b><span>Network Address Translator (NAT)</span></b> - это механизм в сетях TCP/IP, позволяющий преобразовывать "серые" адреса в "белый". Обычно, это применяется для объединения локальной сети с сетью Интернет. Например, все "серые" адреса преобразуются в один "белый". Это необходимо для экономии IP-адресов.</p>
        <p>Устройство, которое отвечает за NAT хранит в себе базу данных сопоставления адресов. Обычно, задачами NAT занимается маршрутизатор.</p>

        <h2>Выделенные диапазоны для определённых задач</h2>
        <p>Для IP-адресов так же выделяют некоторые сервисные диапазоны.</p>
        <ul>
            <li>Адрес <b><i>127.0.0.0/8</i></b> (loopback – петля на себя). Данная сеть нужна для диагностики или проверки работоспособности. Это когда пакеты отправляются самому себе, проходя такой же путь, как если бы пакеты отправлялись на другое устройство. Активно используется для тестирования сайтов на локальных компьютерах. Обычно используется только один адрес - 127.0.0.1. У такого адреса так же есть собственный DNS домен - "localhost". Эта сеть не индексируется в Интернет.</li>
            <li><b><i>169.254.0.0 – 169.254.255.255</i></b> (APIPA – Automatic Private IP Addressing). Механизм «придумывания» IP адреса. Служба APIPA генерирует IP адреса для начала работы с сетью.</li>
        </ul>

        <h3>Как узнать свой IP-адрес в Windows?</h3>
        <p>Для того, чтобы узнать, какой локальный IP-адрес назначен вашим роутером компьютеру, в командной строке можно ввести команду "ipconfig". Она выведет все данные об IP по каждому сетевому адаптеру.</p>
        <h3>Как узнать свой внешний IP-адрес с помощью вб-сервисов?</h3>
        <p>Для того, чтобы узнать внешний IP-адрес, можно воспользоваться сервисом 2ip.ru. При запуске сайта он отобразит все данные, которые доступны для вашего сетевого адаптера остальным устройствам в сети Интернет.</p>
    </div>
</main>
</body>